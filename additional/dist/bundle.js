(()=>{"use strict";var e,t,n,r,o,a,c,s,i,l,d,u,m,f,v,p,g,h,y,E,L,b,S,q,k,x,I,w,_,z;k=document.getElementById("timer-hours"),x=document.getElementById("timer-minutes"),I=document.getElementById("timer-seconds"),w=0,_=function(e){return e>=10?e:"0"+e},(z=function(){var e,t,n,r=(e=(new Date("15 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t});r.timeRemaining<=0?w&&clearInterval(w):(k.textContent=_(r.hours),x.textContent=_(r.minutes),I.textContent=_(r.seconds))})(),w=setInterval(z,1e3),b=document.querySelector(".menu"),S=document.querySelector("menu"),q=function(){S.classList.toggle("active-menu")},S.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("close-btn")||t.matches("menu a"))&&q()})),b.addEventListener("click",q),g=document.querySelector(".popup"),h=document.querySelectorAll(".popup-btn"),y=document.querySelector(".popup-content"),E=document.getElementById("form3").querySelectorAll("input"),L=function(){if(g.style.display="block",window.innerWidth>=768){var e=y.offsetTop,t=-y.offsetHeight;y.style.top=t+"px",p=setInterval((function(){e!==t?t<0?(t-=t,y.style.top=t+"px"):(e%2==0?t+=2:t++,y.style.top=t+"px"):clearInterval(p)}),5)}},h.forEach((function(e){e.addEventListener("click",L)})),g.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?(g.style.display="none",E.forEach((function(e){e.value=""}))):(t=t.closest(".popup-content"))||(g.style.display="none",E.forEach((function(e){e.value=""})))})),m=document.querySelector(".service-header"),f=m.querySelectorAll(".service-header-tab"),v=document.querySelectorAll(".service-tab"),m.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&f.forEach((function(e,n){e===t&&function(e){for(var t=0;t<v.length;t++)e===t?(f[t].classList.add("active"),v[t].classList.remove("d-none")):(f[t].classList.remove("active"),v[t].classList.add("d-none"))}(n)}))})),o=document.querySelectorAll(".portfolio-item"),a=document.querySelector(".portfolio-content"),c=document.querySelector(".portfolio-dots"),s=0,i=function(e,t,n){e[t].classList.remove(n)},l=function(e,t,n){e[t].classList.add(n)},d=function(){i(o,s,"portfolio-item-active"),i(r,s,"dot-active"),++s>=o.length&&(s=0),l(o,s,"portfolio-item-active"),l(r,s,"dot-active")},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;n=setInterval(d,e)},a.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(i(o,s,"portfolio-item-active"),i(r,s,"dot-active"),t.matches("#arrow-right")?s++:t.matches("#arrow-left")?s--:t.matches(".dot")&&r.forEach((function(e,n){e===t&&(s=n)})),s>=o.length&&(s=0),s<0&&(s=o.length-1),l(o,s,"portfolio-item-active"),l(r,s,"dot-active"))})),a.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),a.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),function(){for(var e=0;e<o.length;e++)0===e?c.insertAdjacentHTML("beforeend",'<li class="dot dot-active"></li>'):c.insertAdjacentHTML("beforeend",'<li class="dot"></li>');r=c.querySelectorAll(".dot"),u()}(),(t=document.getElementById("command")).addEventListener("mouseover",(function(t){t.target.matches(".command__photo")&&(e=t.target.src,t.target.src=t.target.dataset.img)})),t.addEventListener("mouseout",(function(t){t.target.matches(".command__photo")&&(t.target.src=e)})),document.querySelectorAll("input").forEach((function(e){e.addEventListener("input",(function(e){var t=e.target,n=t.name,r=t.value;switch(!0){case t.matches(".calc-item"):r=r.replace(/\D/gi,"");break;case"user_name"===n:r=r.replace(/[^а-яё\s]/gi,"");break;case"user_message"===n:r=r.replace(/[^а-яё,.?!'":;()-\s]|(\W)(?=\1)/gi,"");break;case"user_email"===n:r=(r=(r=(r=r.replace(/^[^a-z]|[\^\\]|[^a-z@\-_.!~*']|([@\-_.!~*])(?=\1)/gi,"")).replace(/@[^a-z]/gi,"@")).replace(/(@.+?)([^a-z.-])/gi,(function(e,t,n){return t+""}))).replace(/(@[^.]+\.)([a-z]+)([.])/gi,(function(e,t,n){return t+n}));break;case"user_phone"===n:r=(r=(r=(r=(r=(r=(r=(r=r.replace(/[^\d()\-+]|^[^8+]|([()-])(?=\1)/g,"")).replace(/([()-])([^\d])/g,(function(e,t){return t}))).replace(/(\(.+?)([^\d)-])|(\).+?)([^\d-])|^(\+7|8)([\d-]*\))/g,(function(e){return e.slice(0,-1)}))).replace(/^(\++?)$/g,(function(t,n){return e.data?"+7":""}))).replace(/^(\+7|8)(\(+?|-+?)(\d{3})$/g,(function(t,n,r){return e.data?"-"===r?t+"-":"("===r?t+")":void 0:t}))).replace(/^(\+7|8)(-|\()(\d{3})(-|\))(\d{3})(-+?)(\d{2})$/g,(function(t){return e.data?t+"-":t}))).replace(/^(\+7|8)(([^\d(-])|((\d+?)([^\d]|[\d]{10,})))/g,(function(e){return e.slice(0,-1)}))).replace(/^(\+7|8)(-|\()(\d{3})(-|\))(\d{3})((-+?)(\d{2})(-+?)([\d]{3,}|\d{2}[^\d])|(\d+?)([^\d]|\d{4,}))/g,(function(e){return e.slice(0,-1)}));break;default:t.value=r}t.value=r})),e.addEventListener("blur",(function(e){var t=e.target,n=t.name,r=t.value;switch(r=r.replace(/^[\s-]*|\s(?=\s)|-(?=-)|[\s-]*$/g,""),!0){case"user_email"===n:r=(r=r.replace(/\s/,"")).replace(/[^a-z]*$/,"");break;case"user_phone"===n:/^(\+7|8)(\d{10}|(-+?\d{3}-+?(\d{3}-+?\d{2}-+?\d{2}|\d{7})|(\(+?\d{3}\)+?(\d{3}-+?\d{2}-+?\d{2}|\d{7}))))$/g.test(r)||(r=(r=(r=r.replace(/[()-]/g,"")).replace(/^(\+7|8)(\d{11,})/g,(function(e,t,n){return t+n.slice(0,10)}))).replace(/(\+?[0-9])(.*)/,(function(e,t){return"+7"!==t&&"8"!==t?"":e})));break;case"user_name"===n:r=r.toLowerCase().replace(/(\s|^)\S/g,(function(e){return e.toUpperCase()}));break;default:t.value=r}t.value=r}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),o=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),s=function(){var t=0,s=1,i=1,l=n.options[n.selectedIndex].value,d=+r.value;o.value>1&&(s+=Math.ceil((o.value-1)/10)),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),l&&d&&(t=e*l*d*s*i),c.textContent=t};t.addEventListener("change",(function(e){e.target.matches("select, input")&&s()}))}(100),function(){var e=document.createElement("div"),t=document.getElementById("form1"),n=document.getElementById("form2"),r=document.getElementById("form3"),o=document.createElement("div");o.style.cssText="font-size: 2rem; color: white; margin-top: 1em;";var a=function(t){t.preventDefault();var n,r=t.target,a=r.querySelectorAll("input"),c=!1,s=!1;if(a.forEach((function(e){if(e.classList.contains("form-phone"))if(/^(\+7|8)(\d{10}|(-+?\d{3}-+?(\d{3}-+?\d{2}-+?\d{2}|\d{7})|(\(+?\d{3}\)+?(\d{3}-+?\d{2}-+?\d{2}|\d{7}))))$/g.test(e.value))s=!0;else{var t=document.createElement("div");t.textContent="Введите корректный номер телефона",t.style.cssText="font-size: 1.3rem;  color: red;",e.style.border="2px solid red",r.classList.contains("main-form")&&(t.style.transform="translateY(-3rem)"),e.after(t)}if(e.classList.contains("form-email"))if(/([a-z@\-_.!~*])+(@)([a-z.-])+((\.)([a-z]){2,})$/.test(e.value))c=!0;else{var n=document.createElement("div");n.textContent="Введите корректный email",n.style.cssText="font-size: 1.3rem;  color: red;",e.style.border="2px solid red",r.classList.contains("main-form")&&(n.style.transform="translateY(-3rem)"),e.after(n)}})),s&&c){t.target.appendChild(o),e.classList.add("sk-three-bounce");for(var i=1;i<=3;i++)e.insertAdjacentHTML("beforeend","\n          <div class='sk-bounce-".concat(i," sk-child'></div>\n        "));o.append(e),(n=new FormData(t.target),fetch("./server.php",{method:"POST",body:n})).then((function(e){if(200!==e.status)throw new Error("status network not 200");var t=document.querySelectorAll("input");o.textContent="Спасибо! Мы скоро с вами свяжемся!",t.forEach((function(e){e.value=""}))})).catch((function(e){console.error(e),o.textContent="Что-то пошло не так..."}))}};t.addEventListener("submit",a),n.addEventListener("submit",a),r.addEventListener("submit",a)}()})();