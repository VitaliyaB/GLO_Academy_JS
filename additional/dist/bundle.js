(()=>{"use strict";var e,t,n,o,r,a,c,i,l,s,u,d,m,f,v,p,g,h,y,E,L,b,S,q,k,I,w,_,x;q=document.getElementById("timer-hours"),k=document.getElementById("timer-minutes"),I=document.getElementById("timer-seconds"),w=0,_=function(e){return e>=10?e:"0"+e},(x=function(){var e,t,n,o=(e=(new Date("15 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t});o.timeRemaining<=0?w&&clearInterval(w):(q.textContent=_(o.hours),k.textContent=_(o.minutes),I.textContent=_(o.seconds))})(),w=setInterval(x,1e3),L=document.querySelector(".menu"),b=document.querySelector("menu"),S=function(){b.classList.toggle("active-menu")},b.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("close-btn")||t.matches("menu a"))&&S()})),L.addEventListener("click",S),g=document.querySelector(".popup"),h=document.querySelectorAll(".popup-btn"),y=document.querySelector(".popup-content"),E=function(){if(g.style.display="block",window.innerWidth>=768){var e=y.offsetTop,t=-y.offsetHeight;y.style.top=t+"px",p=setInterval((function(){e!==t?t<0?(t-=t,y.style.top=t+"px"):(e%2==0?t+=2:t++,y.style.top=t+"px"):clearInterval(p)}),5)}},h.forEach((function(e){e.addEventListener("click",E)})),g.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?g.style.display="none":(t=t.closest(".popup-content"))||(g.style.display="none")})),m=document.querySelector(".service-header"),f=m.querySelectorAll(".service-header-tab"),v=document.querySelectorAll(".service-tab"),m.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&f.forEach((function(e,n){e===t&&function(e){for(var t=0;t<v.length;t++)e===t?(f[t].classList.add("active"),v[t].classList.remove("d-none")):(f[t].classList.remove("active"),v[t].classList.add("d-none"))}(n)}))})),r=document.querySelectorAll(".portfolio-item"),a=document.querySelector(".portfolio-content"),c=document.querySelector(".portfolio-dots"),i=0,l=function(e,t,n){e[t].classList.remove(n)},s=function(e,t,n){e[t].classList.add(n)},u=function(){l(r,i,"portfolio-item-active"),l(o,i,"dot-active"),++i>=r.length&&(i=0),s(r,i,"portfolio-item-active"),s(o,i,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;n=setInterval(u,e)},a.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(l(r,i,"portfolio-item-active"),l(o,i,"dot-active"),t.matches("#arrow-right")?i++:t.matches("#arrow-left")?i--:t.matches(".dot")&&o.forEach((function(e,n){e===t&&(i=n)})),i>=r.length&&(i=0),i<0&&(i=r.length-1),s(r,i,"portfolio-item-active"),s(o,i,"dot-active"))})),a.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),a.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d()})),function(){for(var e=0;e<r.length;e++)0===e?c.insertAdjacentHTML("beforeend",'<li class="dot dot-active"></li>'):c.insertAdjacentHTML("beforeend",'<li class="dot"></li>');o=c.querySelectorAll(".dot"),d()}(),(t=document.getElementById("command")).addEventListener("mouseover",(function(t){t.target.matches(".command__photo")&&(e=t.target.src,t.target.src=t.target.dataset.img)})),t.addEventListener("mouseout",(function(t){t.target.matches(".command__photo")&&(t.target.src=e)})),document.querySelectorAll("input").forEach((function(e){e.addEventListener("input",(function(e){var t=e.target,n=t.name,o=t.value;switch(!0){case t.matches(".calc-item"):o=o.replace(/\D/,"");break;case"user_name"===n:o=o.replace(/[^а-яё\s]/i,"");break;case"user_message"===n:o=o.replace(/[^а-яё\s\W0-9]|(\W)(?=\1)/i,"");break;case"user_email"===n:o=(o=(o=(o=o.replace(/^[^a-z]|[\^\\]|[^a-z@\-_.!~*']|([@\-_.!~*])(?=\1)/gi,"")).replace(/@[^a-z]/gi,"@")).replace(/(@.+?)([^a-z.-])/gi,(function(e,t,n){return t+""}))).replace(/(@[^.]+\.)([a-z]+)([.])/gi,(function(e,t,n){return t+n}));break;case"user_phone"===n:o=(o=(o=(o=(o=(o=(o=(o=o.replace(/[^\d()\-+]|^[^8+]|([()-])(?=\1)/g,"")).replace(/([()-])([^\d])/g,(function(e,t){return t}))).replace(/(\(.+?)([^\d)-])|(\).+?)([^\d-])|^(\+7|8)([\d-]*\))/g,(function(e){return e.slice(0,-1)}))).replace(/^(\++?)$/g,(function(t,n){return e.data?"+7":""}))).replace(/^(\+7|8)(\(+?|-+?)(\d{3})$/g,(function(t,n,o){return e.data?"-"===o?t+"-":"("===o?t+")":void 0:t}))).replace(/^(\+7|8)(-|\()(\d{3})(-|\))(\d{3})(-+?)(\d{2})$/g,(function(t){return e.data?t+"-":t}))).replace(/^(\+7|8)(([^\d(-])|((\d+?)([^\d]|[\d]{10,})))/g,(function(e){return e.slice(0,-1)}))).replace(/^(\+7|8)(-|\()(\d{3})(-|\))(\d{3})((-+?)(\d{2})(-+?)([\d]{3,}|\d{2}[^\d])|(\d+?)([^\d]|\d{4,}))/g,(function(e){return e.slice(0,-1)}));break;default:t.value=o}t.value=o})),e.addEventListener("blur",(function(e){var t=e.target,n=t.name,o=t.value;switch(o=o.replace(/^[\s-]*|\s(?=\s)|-(?=-)|[\s-]*$/g,""),!0){case"user_email"===n:o=(o=o.replace(/\s/,"")).replace(/[^a-z]*$/,"");break;case"user_phone"===n:/^(\+7|8)(\d{10}|(-+?\d{3}-+?(\d{3}-+?\d{2}-+?\d{2}|\d{7})|(\(+?\d{3}\)+?(\d{3}-+?\d{2}-+?\d{2}|\d{7}))))$/g.test(o)||(o=(o=(o=o.replace(/[()-]/g,"")).replace(/^(\+7|8)(\d{11,})/g,(function(e,t,n){return t+n.slice(0,10)}))).replace(/(\+?[0-9])(.*)/,(function(e,t){return"+7"!==t&&"8"!==t?"":e})));break;case"user_name"===n:o=o.toLowerCase().replace(/(\s|^)\S/g,(function(e){return e.toUpperCase()}));break;default:t.value=o}t.value=o}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),i=function(){var t=0,i=1,l=1,s=n.options[n.selectedIndex].value,u=+o.value;r.value>1&&(i+=Math.ceil((r.value-1)/10)),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),s&&u&&(t=e*s*u*i*l),c.textContent=t};t.addEventListener("change",(function(e){e.target.matches("select, input")&&i()}))}(100),function(){var e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),o=document.createElement("div");o.style.cssText="font-size: 2rem; color: white; margin-top: 1em;";var r=function(e){var t;e.preventDefault(),e.target.appendChild(o),o.textContent="Загрузка...",(t=new FormData(e.target),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:t})).then((function(e){if(200!==e.status)throw new Error("status network not 200");var t=document.querySelectorAll("input");o.textContent="Спасибо! Мы скоро с вами свяжемся!",t.forEach((function(e){e.value=""}))})).catch((function(e){console.error(e),o.textContent="Что-то пошло не так..."}))};e.addEventListener("submit",r),t.addEventListener("submit",r),n.addEventListener("submit",r)}()})();