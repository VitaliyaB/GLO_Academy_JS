(()=>{"use strict";var e,t,n,r,o,a,c,l,i,s,d,u,m,f,v,p,g,h,y,E,L,b,S,q,k,x,I,w,_,A,z,C;I=document.getElementById("timer-hours"),w=document.getElementById("timer-minutes"),_=document.getElementById("timer-seconds"),A=0,z=function(e){return e>=10?e:"0"+e},(C=function(){var e,t,n,r=(e=(new Date("15 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t});r.timeRemaining<=0?A&&clearInterval(A):(I.textContent=z(r.hours),w.textContent=z(r.minutes),_.textContent=z(r.seconds))})(),A=setInterval(C,1e3),q=document.querySelector(".menu"),k=document.querySelector("menu"),x=function(){k.classList.toggle("active-menu")},k.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("close-btn")||t.matches("menu a"))&&x()})),q.addEventListener("click",x),y=document.querySelector(".popup"),E=document.querySelectorAll(".popup-btn"),L=document.querySelector(".popup-content"),b=document.getElementById("form3").querySelectorAll("input"),S=function(){if(y.style.display="block",window.innerWidth>=768){var e=L.offsetTop,t=-L.offsetHeight;L.style.top=t+"px",h=setInterval((function(){e!==t?t<0?(t-=t,L.style.top=t+"px"):(e%2==0?t+=2:t++,L.style.top=t+"px"):clearInterval(h)}),5)}},E.forEach((function(e){e.addEventListener("click",S)})),y.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?(y.style.display="none",b.forEach((function(e){e.value=""}))):(t=t.closest(".popup-content"))||(y.style.display="none",b.forEach((function(e){e.value=""})))})),v=document.querySelector(".service-header"),p=v.querySelectorAll(".service-header-tab"),g=document.querySelectorAll(".service-tab"),v.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&p.forEach((function(e,n){e===t&&function(e){for(var t=0;t<g.length;t++)e===t?(p[t].classList.add("active"),g[t].classList.remove("d-none")):(p[t].classList.remove("active"),g[t].classList.add("d-none"))}(n)}))})),c=document.querySelectorAll(".portfolio-item"),l=document.querySelector(".portfolio-content"),i=document.querySelector(".portfolio-dots"),s=0,d=function(e,t,n){e[t].classList.remove(n)},u=function(e,t,n){e[t].classList.add(n)},m=function(){d(c,s,"portfolio-item-active"),d(a,s,"dot-active"),++s>=c.length&&(s=0),u(c,s,"portfolio-item-active"),u(a,s,"dot-active")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;o=setInterval(m,e)},l.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(d(c,s,"portfolio-item-active"),d(a,s,"dot-active"),t.matches("#arrow-right")?s++:t.matches("#arrow-left")?s--:t.matches(".dot")&&a.forEach((function(e,n){e===t&&(s=n)})),s>=c.length&&(s=0),s<0&&(s=c.length-1),u(c,s,"portfolio-item-active"),u(a,s,"dot-active"))})),l.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),l.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&f()})),function(){for(var e=0;e<c.length;e++)0===e?i.insertAdjacentHTML("beforeend",'<li class="dot dot-active"></li>'):i.insertAdjacentHTML("beforeend",'<li class="dot"></li>');a=i.querySelectorAll(".dot"),f()}(),n=document.querySelectorAll('a[href*="#"]'),r=function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href").slice(1);t&&document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})},n.forEach((function(e){e.addEventListener("click",r)})),(t=document.getElementById("command")).addEventListener("mouseover",(function(t){t.target.matches(".command__photo")&&(e=t.target.src,t.target.src=t.target.dataset.img)})),t.addEventListener("mouseout",(function(t){t.target.matches(".command__photo")&&(t.target.src=e)})),document.querySelectorAll("input").forEach((function(e){e.addEventListener("input",(function(e){var t=e.target,n=t.name,r=t.value;switch(!0){case t.matches(".calc-item"):r=r.replace(/\D/gi,"");break;case"user_name"===n:r=r.replace(/[^а-яё\s]/gi,"");break;case"user_message"===n:r=r.replace(/[^а-яё,.?!'":;()-\s]|(\W)(?=\1)/gi,"");break;case"user_email"===n:r=(r=(r=(r=r.replace(/^[^a-z]|[\^\\]|[^a-z@\-_.!~*']|([@\-_.!~*])(?=\1)/gi,"")).replace(/@[^a-z]/gi,"@")).replace(/(@.+?)([^a-z.-])/gi,(function(e,t,n){return t+""}))).replace(/(@[^.]+\.)([a-z]+)([.])/gi,(function(e,t,n){return t+n}));break;case"user_phone"===n:r=(r=(r=(r=(r=(r=(r=(r=r.replace(/[^\d()\-+]|^[^8+]|([()-])(?=\1)/g,"")).replace(/([()-])([^\d])/g,(function(e,t){return t}))).replace(/(\(.+?)([^\d)-])|(\).+?)([^\d-])|^(\+7|8)([\d-]*\))/g,(function(e){return e.slice(0,-1)}))).replace(/^(\++?)$/g,(function(t,n){return e.data?"+7":""}))).replace(/^(\+7|8)(\(+?|-+?)(\d{3})$/g,(function(t,n,r){return e.data?"-"===r?t+"-":"("===r?t+")":void 0:t}))).replace(/^(\+7|8)(-|\()(\d{3})(-|\))(\d{3})(-+?)(\d{2})$/g,(function(t){return e.data?t+"-":t}))).replace(/^(\+7|8)(([^\d(-])|((\d+?)([^\d]|[\d]{10,})))/g,(function(e){return e.slice(0,-1)}))).replace(/^(\+7|8)(-|\()(\d{3})(-|\))(\d{3})((-+?)(\d{2})(-+?)([\d]{3,}|\d{2}[^\d])|(\d+?)([^\d]|\d{4,}))/g,(function(e){return e.slice(0,-1)}));break;default:t.value=r}t.value=r})),e.addEventListener("blur",(function(e){var t=e.target,n=t.name,r=t.value;switch(r=r.replace(/^[\s-]*|\s(?=\s)|-(?=-)|[\s-]*$/g,""),!0){case"user_email"===n:r=(r=r.replace(/\s/,"")).replace(/[^a-z]*$/,"");break;case"user_phone"===n:/^(\+7|8)(\d{10}|(-+?\d{3}-+?(\d{3}-+?\d{2}-+?\d{2}|\d{7})|(\(+?\d{3}\)+?(\d{3}-+?\d{2}-+?\d{2}|\d{7}))))$/g.test(r)||(r=(r=(r=r.replace(/[()-]/g,"")).replace(/^(\+7|8)(\d{11,})/g,(function(e,t,n){return t+n.slice(0,10)}))).replace(/(\+?[0-9])(.*)/,(function(e,t){return"+7"!==t&&"8"!==t?"":e})));break;case"user_name"===n:r=r.toLowerCase().replace(/(\s|^)\S/g,(function(e){return e.toUpperCase()}));break;default:t.value=r}t.value=r}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),o=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),l=function(){var t=0,l=1,i=1,s=n.options[n.selectedIndex].value,d=+r.value;o.value>1&&(l+=Math.ceil((o.value-1)/10)),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),s&&d&&(t=e*s*d*l*i),c.textContent=t};t.addEventListener("change",(function(e){e.target.matches("select, input")&&l()}))}(100),function(){var e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),r=document.createElement("div");r.style.cssText="font-size: 2rem; color: white; margin-top: 1em;";var o=function(e){e.preventDefault();var t,n=e.target,o=n.querySelectorAll("input"),a=!1,c=!1;o.forEach((function(e){if(e.classList.contains("form-phone"))if(/^(\+7|8)(\d{10}|(-+?\d{3}-+?(\d{3}-+?\d{2}-+?\d{2}|\d{7})|(\(+?\d{3}\)+?(\d{3}-+?\d{2}-+?\d{2}|\d{7}))))$/g.test(e.value))c=!0;else{var t=document.createElement("div");t.textContent="Введите корректный номер телефона",t.style.cssText="font-size: 1.3rem;  color: red;",e.style.border="2px solid red",n.classList.contains("main-form")&&(t.style.transform="translateY(-3rem)"),e.after(t)}if(e.classList.contains("form-email"))if(/([a-z@\-_.!~*])+(@)([a-z.-])+((\.)([a-z]){2,})$/.test(e.value))a=!0;else{var r=document.createElement("div");r.textContent="Введите корректный email",r.style.cssText="font-size: 1.3rem;  color: red;",e.style.border="2px solid red",n.classList.contains("main-form")&&(r.style.transform="translateY(-3rem)"),e.after(r)}})),c&&a&&(e.target.appendChild(r),r.textContent="Загрузка...",(t=new FormData(e.target),fetch("./server.php",{method:"POST",body:t})).then((function(e){if(200!==e.status)throw new Error("status network not 200");var t=document.querySelectorAll("input");r.textContent="Спасибо! Мы скоро с вами свяжемся!",t.forEach((function(e){e.value=""}))})).catch((function(e){console.error(e),r.textContent="Что-то пошло не так..."})))};e.addEventListener("submit",o),t.addEventListener("submit",o),n.addEventListener("submit",o)}()})();