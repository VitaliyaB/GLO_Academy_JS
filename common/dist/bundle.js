(()=>{"use strict";var e,t,n,r,o,a,c,s,l,i,u,d,m,f,v,p,g,h,y,E,L,b,S,q,_,k,I,x,w,A,z;k=document.getElementById("timer-hours"),I=document.getElementById("timer-minutes"),x=document.getElementById("timer-seconds"),w=0,A=function(e){return e>=10?e:"0"+e},(z=function(){var e,t,n,r=(e=(new Date("17 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t});r.timeRemaining<=0?w&&clearInterval(w):(k.textContent=A(r.hours),I.textContent=A(r.minutes),x.textContent=A(r.seconds))})(),w=setInterval(z,1e3),q=document.querySelector("body"),_=document.querySelector("menu"),q.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")&&_.classList.add("active-menu"),(t.classList.contains("close-btn")||t.matches("menu a"))&&_.classList.remove("active-menu"),t.closest(".active-menu")||!_.classList.contains("active-menu")||t.closest(".menu")||_.classList.remove("active-menu")})),y=document.querySelector(".popup"),E=document.querySelectorAll(".popup-btn"),L=document.querySelector(".popup-content"),b=document.getElementById("form3").querySelectorAll("input"),S=function(){if(y.style.display="block",window.innerWidth>=768){var e=L.offsetTop,t=-L.offsetHeight;L.style.top=t+"px",h=setInterval((function(){e!==t?t<0?(t-=t,L.style.top=t+"px"):(e%2==0?t+=2:t++,L.style.top=t+"px"):clearInterval(h)}),5)}},E.forEach((function(e){e.addEventListener("click",S)})),y.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?(y.style.display="none",b.forEach((function(e){e.value=""}))):(t=t.closest(".popup-content"))||(y.style.display="none",b.forEach((function(e){e.value=""})))})),v=document.querySelector(".service-header"),p=v.querySelectorAll(".service-header-tab"),g=document.querySelectorAll(".service-tab"),v.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&p.forEach((function(e,n){e===t&&function(e){for(var t=0;t<g.length;t++)e===t?(p[t].classList.add("active"),g[t].classList.remove("d-none")):(p[t].classList.remove("active"),g[t].classList.add("d-none"))}(n)}))})),c=document.querySelectorAll(".portfolio-item"),s=document.querySelector(".portfolio-content"),l=document.querySelector(".portfolio-dots"),i=0,u=function(e,t,n){e[t].classList.remove(n)},d=function(e,t,n){e[t].classList.add(n)},m=function(){u(c,i,"portfolio-item-active"),u(a,i,"dot-active"),++i>=c.length&&(i=0),d(c,i,"portfolio-item-active"),d(a,i,"dot-active")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;o=setInterval(m,e)},s.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(u(c,i,"portfolio-item-active"),u(a,i,"dot-active"),t.matches("#arrow-right")?i++:t.matches("#arrow-left")?i--:t.matches(".dot")&&a.forEach((function(e,n){e===t&&(i=n)})),i>=c.length&&(i=0),i<0&&(i=c.length-1),d(c,i,"portfolio-item-active"),d(a,i,"dot-active"))})),s.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),s.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&f()})),function(){for(var e=0;e<c.length;e++)0===e?l.insertAdjacentHTML("beforeend",'<li class="dot dot-active"></li>'):l.insertAdjacentHTML("beforeend",'<li class="dot"></li>');a=l.querySelectorAll(".dot"),f()}(),n=document.querySelectorAll('a[href*="#"]'),r=function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href").slice(1);t&&document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})},n.forEach((function(e){e.addEventListener("click",r)})),(t=document.getElementById("command")).addEventListener("mouseover",(function(t){t.target.matches(".command__photo")&&(e=t.target.src,t.target.src=t.target.dataset.img)})),t.addEventListener("mouseout",(function(t){t.target.matches(".command__photo")&&(t.target.src=e)})),document.querySelectorAll("input").forEach((function(e){e.addEventListener("input",(function(e){var t=e.target,n=t.name,r=t.nextElementSibling,o=t.value;switch(t.style.border="none",r&&r.classList.contains("err-message")&&r.remove(),!0){case t.matches(".calc-item"):o=o.replace(/\D/gi,"");break;case"user_name"===n:o=o.replace(/[^а-яё\s]/gi,"");break;case"user_message"===n:o=o.replace(/[^а-яё,.?!'":;()-\s]|(\W)(?=\1)/gi,"");break;case"user_email"===n:o=(o=(o=(o=o.replace(/^[^a-z]|[\^\\]|[^a-z@\-_.!~*']|([@\-_.!~*])(?=\1)/gi,"")).replace(/@[^a-z]/gi,"@")).replace(/(@.+?)([^a-z.-])/gi,(function(e,t,n){return t+""}))).replace(/(@[^.]+\.)([a-z]+)([.])/gi,(function(e,t,n){return t+n}));break;case"user_phone"===n:o=(o=(o=(o=(o=(o=(o=(o=o.replace(/[^\d()\-+]|^[^8+]|([()-])(?=\1)/g,"")).replace(/([()-])([^\d])/g,(function(e,t){return t}))).replace(/(\(.+?)([^\d)-])|(\).+?)([^\d-])|^(\+7|8)([\d-]*\))/g,(function(e){return e.slice(0,-1)}))).replace(/^(\++?)$/g,(function(t,n){return e.data?"+7":""}))).replace(/^(\+7|8)(\(+?|-+?)(\d{3})$/g,(function(t,n,r){return e.data?"-"===r?t+"-":"("===r?t+")":void 0:t}))).replace(/^(\+7|8)(-|\()(\d{3})(-|\))(\d{3})(-+?)(\d{2})$/g,(function(t){return e.data?t+"-":t}))).replace(/^(\+7|8)(([^\d(-])|((\d+?)([^\d]|[\d]{10,})))/g,(function(e){return e.slice(0,-1)}))).replace(/^(\+7|8)(-|\()(\d{3})(-|\))(\d{3})((-+?)(\d{2})(-+?)([\d]{3,}|\d{2}[^\d])|(\d+?)([^\d]|\d{4,}))/g,(function(e){return e.slice(0,-1)}));break;default:t.value=o}t.value=o})),e.addEventListener("blur",(function(e){var t=e.target,n=t.name,r=t.value;switch(r=r.replace(/^[\s-]*|\s(?=\s)|-(?=-)|[\s-]*$/g,""),!0){case"user_email"===n:r=(r=r.replace(/\s/,"")).replace(/[^a-z]*$/,"");break;case"user_phone"===n:/^(\+7|8)(\d{10}|(-+?\d{3}-+?(\d{3}-+?\d{2}-+?\d{2}|\d{7})|(\(+?\d{3}\)+?(\d{3}-+?\d{2}-+?\d{2}|\d{7}))))$/g.test(r)||(r=(r=r.replace(/[()-]/g,"")).replace(/^(\+7|8)(\d{11,})/g,(function(e,t,n){return t+n.slice(0,10)})));break;case"user_name"===n:r=r.toLowerCase().replace(/(\s|^)\S/g,(function(e){return e.toUpperCase()}));break;default:t.value=r}t.value=r}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),o=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),s=function(){var t=0,s=1,l=1,i=n.options[n.selectedIndex].value,u=+r.value;o.value>1&&(s+=Math.ceil((o.value-1)/10)),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),i&&u&&(t=e*i*u*s*l),c.textContent=t};t.addEventListener("change",(function(e){e.target.matches("select, input")&&s()}))}(100),function(){var e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),r=document.createElement("div");r.style.cssText="font-size: 2rem; color: white; margin-top: 1em;";var o=function(e){e.preventDefault();var t=e.target,n=t.querySelectorAll("input"),o=!1,a=!1,c=!1,s=!1;document.querySelectorAll(".err-message").forEach((function(e){e.remove()}));var l,i=function(e,n,r){var o=document.createElement("div");o.classList.add("err-message"),o.textContent=e,o.style.cssText="user_message"===r?"font-size: 1.3rem;  color: red; margin-top: -2rem":"font-size: 1.3rem;  color: red;",n.style.border="2px solid red",t.classList.contains("main-form")&&(o.style.transform="translateY(-3rem)"),n.after(o)};n.forEach((function(e){e.style.border="none";var t=e.getAttribute("name");"user_name"===t&&(/[а-яё\s]{2,}/gi.test(e.value)?o=!0:i("Поле должно содержать не менее 2 символов",e,t)),"user_phone"===t&&(/^(\+7|8)(\d{10}|(-+?\d{3}-+?(\d{3}-+?\d{2}-+?\d{2}|\d{7})|(\(+?\d{3}\)+?(\d{3}-+?\d{2}-+?\d{2}|\d{7}))))$/g.test(e.value)?c=!0:i("Введите телефон в формате +7(123)123-45-67 или 8(123)123-45-67",e,t)),"user_email"===t&&(/([a-z@\-_.!~*])+(@)([a-z.-])+((\.)([a-z]){2,})$/gi.test(e.value)?a=!0:i("Введите email в формате test@test.by",e,t)),"user_message"===t&&(e.value?s=!0:i("Поле должно быть заполнено",e,t))})),(t.classList.contains("footer-form")&&c&&a&&s&&o||!t.classList.contains("footer-form")&&c&&a&&o)&&(e.target.appendChild(r),r.textContent="Загрузка...",(l=new FormData(e.target),fetch("./server.php",{method:"POST",body:l})).then((function(e){if(200!==e.status)throw new Error("status network not 200");var n=document.querySelectorAll("input");r.textContent="Спасибо! Мы скоро с вами свяжемся!",n.forEach((function(e){e.value=""})),setTimeout((function(){r.remove(),"form3"===t.id&&(t.closest(".popup").style.display="none")}),3e3)})).catch((function(e){console.error(e),r.textContent="Что-то пошло не так..."})))};e.addEventListener("submit",o),t.addEventListener("submit",o),n.addEventListener("submit",o)}()})();