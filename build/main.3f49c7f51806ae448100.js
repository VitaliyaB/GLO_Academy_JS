!function(){"use strict";const e=function(){var e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord"),o=document.querySelector(".header-contacts__phone-number-accord .header-contacts__phone-number");e.addEventListener("click",(function(){"0"===o.style.opacity?(t.style.top="23px",o.style.opacity="1"):(t.style.top="0",o.style.opacity="0")}))};const t=function(){var e=document.querySelector("body"),t=document.querySelector(".popup-menu"),o=document.querySelector(".popup-dialog-menu");e.addEventListener("click",(function(e){var r=e.target;r.classList.contains("menu__icon")&&(t.style.visibility="visible",o.style.transform="translate3d(0, 0, 0)",document.documentElement.clientWidth>=575?(o.classList.remove("hideMenu"),o.classList.add("showMenu")):o.classList.add("showMenu-mobile")),(r.classList.contains("close-menu")||r.matches(".popup-menu a")||!r.closest(".popup-dialog-menu")&&o.classList.contains("showMenu")&&!r.classList.contains("menu__icon")||r.closest(".link-list-menu"))&&(t.style.visibility="hidden",document.documentElement.clientWidth>=575?(o.style.transform="translate3d(645px, 0, 0)",o.classList.remove("showMenu"),o.classList.add("hideMenu")):(o.style.transform="translate3d(0, -100vh, 0)",o.classList.remove("showMenu-mobile")))}))};const o=function(){var e=document.querySelectorAll(".popup-menu-nav__item .menu-link"),t=document.querySelector(".button-footer"),o=function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href").slice(1);t&&document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};e.forEach((function(e){e.addEventListener("click",o)})),t.addEventListener("click",o)};const r=function(e,t,o,r,i){var n,l,s,c,a,p,u,d,f=e.offsetWidth,m=document.querySelector("."+t),y=m.querySelectorAll("."+o),v=y.length,_=window.getComputedStyle(y[0]),h=y[0].offsetWidth+parseFloat(_.marginLeft)+parseFloat(_.marginRight),b=Math.floor(f/h),g=[],w=[],S=0;if(".popup-portfolio"===r){var q=document.querySelector(r);d=q.querySelectorAll(".popup-portfolio-text"),console.log("createSlider ~ portfolioText",d)}if(".portfolioDesktop"===r&&(p=document.querySelector(".slider-arrow_right-portfolio"),u=document.querySelector(".slider-arrow_left-portfolio")),".portfolioDesktop"!==r){for(var L=0;L<b;L++){var E=y[L].cloneNode(!0);g.push(E)}for(var k=y.length-1;k>=y.length-b;k--){var x=y[k].cloneNode(!0);w.push(x)}g.forEach((function(e,t){0===t&&(e.id="first-clone",n=e),m.append(e)})),w.forEach((function(e,t,o){t===o.length-1&&(e.id="last-clone",l=e),m.prepend(e)}))}".popup-transparency"===r||".popup-portfolio"===r?c=-h*(a=i+1):".portfolioDesktop"===r?c=-h*(a=0):(c=-h*b,a=b),m.style.transform="translateX(".concat(c,"px)");var A=function(e){var t=a;if(1!==b&&(t+=1),y[t].querySelector(r+"-item-popup").style.visibility="visible",e){var o=y[t].querySelector(r+"-item__icon"),i=y[t].querySelector(r+"-item__icon-inner");if(".problems"===r)i.querySelector("svg").style.transition="unset";o.style.transition="unset",i.style.transition="unset"}y[t].classList.add("active-item")},C=function(){y=m.querySelectorAll("."+o)},B=function(e){".formula"!==r&&".problems"!==r||A(e)},R=function(e){B(e),m.style.transform="translateX(".concat(-h*a,"px)"),m.style.transition=".7s"},W=function(){var e=document.querySelector(r+"-slider-wrap .slider-counter-content__current"),t=1;t=a>v?a-v:0===a?v:a,e.textContent=t,function(e){".popup-portfolio"===r&&(d[S].style.display="none",d[S=e-1].style.display="flex")}(t)},D=function(){C(),a>=y.length-1||(".portfolioDesktop"===r&&document.documentElement.clientWidth>575&&(u.style.display="flex",a===v-1-b&&(p.style.display="none")),a++,R(),".popup-transparency"!==r&&".repair-types"!==r&&".portfolio"!==r&&".popup-portfolio"!==r||W())},M=function(){s=setInterval(D,1500)};(".formula"!==r&&".problems"!==r||(C(),A()),".partners"===r&&M(),".popup-transparency"===r||".repair-types"===r||".portfolio"===r||".popup-portfolio"===r)&&(document.querySelector(r+"-slider-wrap .slider-counter-content__total").textContent=v,W());e.addEventListener("transitionend",(function(e){if(e.target.classList.contains(t)&&".portfolioDesktop"!==r){if(C(),y[a].id===n.id){m.style.transition="none",a=b,m.style.transform="translateX(".concat(-h*a,"px)");B(1)}if(y[a].id===l.id){m.style.transition="none",a=y.length-2*b,m.style.transform="translateX(".concat(-h*a,"px)");B(1)}}})),e.addEventListener("click",(function(e){var t=e.target;(t.closest(".slider-arrow_right")||t.closest(".slider-arrow_left")||t.closest(".popup-arrow_transparency_left")||t.closest(".popup-arrow_transparency_right")||t.closest(".nav-arrow_right")||t.closest(".nav-arrow_left")||t.closest(".slider-arrow_right-portfolio")||t.closest(".slider-arrow_left-portfolio")||t.closest(".slider-arrow-tablet-mobile_left")||t.closest(".slider-arrow-tablet-mobile_right")||t.closest(".popup-arrow_left")||t.closest(".popup-arrow_right"))&&(C(),".formula"!==r&&".problems"!==r||y.forEach((function(e){e.querySelector(r+"-item-popup").style.visibility="hidden",e.classList.remove("active-item")})),(t.closest(".slider-arrow_right")||t.closest(".popup-arrow_transparency_right")||t.closest(".nav-arrow_right")||t.closest(".slider-arrow_right-portfolio")||t.closest(".slider-arrow-tablet-mobile_right")||t.closest(".popup-arrow_right"))&&D(),(t.closest(".slider-arrow_left")||t.closest(".popup-arrow_transparency_left")||t.closest(".nav-arrow_left")||t.closest(".slider-arrow_left-portfolio")||t.closest(".slider-arrow-tablet-mobile_left")||t.closest(".popup-arrow_left"))&&(C(),".portfolioDesktop"===r&&document.documentElement.clientWidth>575&&(p.style.display="flex",1===a&&(u.style.display="none")),a<=0||(a--,R(),".popup-transparency"!==r&&".repair-types"!==r&&".portfolio"!==r&&".popup-portfolio"!==r||W())))})),".partners"===r&&(e.addEventListener("mouseover",(function(e){(e.target.closest("."+t)||e.target.closest(".slider-arrow"))&&clearInterval(s)})),e.addEventListener("mouseout",(function(e){(e.target.closest("."+t)||e.target.closest(".slider-arrow"))&&M()})))};const i=function(){var e,t,o=document.querySelectorAll(".link-list"),i=document.querySelectorAll(".popup .close"),n=document.querySelectorAll(".link-privacy"),l=document.querySelectorAll(".button_wide"),s=document.querySelectorAll(".transparency-item__img"),c=document.querySelectorAll(".portfolio-slider-mobile .portfolio-slider__slide-frame"),a=document.querySelectorAll(".portfolio-slider .portfolio-slider__slide-frame"),p=document.querySelector(".popup-repair-types"),u=document.querySelector(".popup-privacy"),d=document.querySelector(".popup-consultation"),f=document.querySelector(".popup-transparency"),m=document.querySelector(".popup-portfolio"),y=function(o,i){var n=o.target;(n.closest(".link-list")&&(p.style.visibility="visible"),n.classList.contains("link-privacy")&&(u.style.visibility="visible"),n.classList.contains("button_wide"))&&(d.querySelectorAll(".err-message").forEach((function(e){e.remove()})),d.style.visibility="visible");if(n.closest(".transparency-item__img")){f.style.visibility="visible",e=document.querySelector(".popup-transparency-item__wrapper").cloneNode(!0);var l=document.querySelector(".popup-transparency-slider-wrap");r(l,"popup-transparency-item__wrapper","popup-transparency-slider__slide",".popup-transparency",i)}if(n.closest(".portfolio-slider__slide-frame")){m.style.visibility="visible",t=document.querySelector(".popup-portfolio-item__wrapper").cloneNode(!0);var s=document.querySelector(".popup-portfolio-slider-wrap");r(s,"popup-portfolio-item__wrapper","popup-portfolio-slider__slide",".popup-portfolio",i)}n.classList.contains("close")&&(n.closest(".popup").style.visibility="hidden",n.closest(".popup-transparency")&&document.querySelector(".popup-transparency-item__wrapper").replaceWith(e),n.closest(".popup-portfolio")&&document.querySelector(".popup-portfolio-item__wrapper").replaceWith(t))};o.forEach((function(e){e.addEventListener("click",y)})),i.forEach((function(e){e.addEventListener("click",y)})),n.forEach((function(e){e.addEventListener("click",y)})),l.forEach((function(e){e.addEventListener("click",y)})),s.forEach((function(e,t){e.addEventListener("click",(function(e){y(e,t)}))})),c.forEach((function(e,t){e.addEventListener("click",(function(e){y(e,t)}))})),a.forEach((function(e,t){e.addEventListener("click",(function(e){console.log("item.addEventListener ~ event",e),console.log("item.addEventListener ~ idx",t),y(e,t)}))}))};const n=function(){var e=document.querySelectorAll(".feedback-block__form-input_phone"),t=document.querySelectorAll(".feedback__input-input"),o=function(e){var t=e.target,o=t.value;o=(o=(o=(o=(o=(o=o.replace(/\D|^[^78]/gi,"")).replace(/^[78]/gi,"+7(")).replace(/^\+7\(\d{3}/gi,(function(e){return e+")"}))).replace(/^\+7\(\d{3}\)\d{3}/gi,(function(e){return e+"-"}))).replace(/^\+7\(\d{3}\)\d{3}-\d{2}/gi,(function(e){return e+"-"}))).replace(/^\+7\(\d{3}\)\d{3}-\d{2}-\d{3,}/gi,(function(e){return e.slice(0,-1)})),t.value=o};e.forEach((function(e){e.addEventListener("input",o)})),t.forEach((function(e){e.addEventListener("input",o)}))};const l=function(){var e=document.querySelectorAll(".feedback__form"),t=document.querySelectorAll(".feedback-block__form"),o=document.createElement("div");o.style.cssText="font-size: 2rem; color: white; margin-top: 1em;";var r=function(e){e.preventDefault();var t=e.target,r=t.querySelectorAll("input"),i=!1,n=!1,l=!1;document.querySelectorAll(".err-message").forEach((function(e){e.remove()}));var s=function(e,t,o){var r=document.createElement("div");r.classList.add("err-message"),r.textContent=e,"phone"===o&&(r.style.cssText="margin-bottom: 10px;",t.closest(".feedback__form")&&(t.style.border="2px solid #f15858; z-index: 1; border-bottom: 5px solid #f15858;",r.style.color="#f15858",t.closest(".feedback__form").append(r)),t.closest(".feedback-block__form")&&(t.style.border="2px solid #bb2626; z-index: 1; border-bottom: 5px solid #bb2626;",r.style.color="#bb2626",t.closest(".feedback-block__form").append(r)),t.before(r)),"checkbox"===o&&(t.closest(".feedback__form")&&(r.style.color="#f15858",r.style.marginTop="-25px",t.closest(".feedback__form").append(r)),t.closest(".feedback-block__form")&&(r.style.color="#bb2626",t.closest(".feedback-block__form").append(r))),"name"===o&&(r.style.cssText="color: #bb2626; margin-bottom: 10px;",t.before(r))};t.classList.contains("feedback__form")&&(n=!0),r.forEach((function(r){var c=r.name,a=r.type;if("phone"===c){/^\++?7\(+?\d{3}\)+?\d{3}-+?\d{2}-+?\d{2}$/gi.test(r.value)?i=!0:s("Введите телефон в формате +7(123)123-45-67",r,c)}if("checkbox"===a&&(r.checked?l=!0:s("Ознакомьтесь, пожалуйста.",r,a)),"name"===c){r.value=r.value.trim();/^[а-я]+$/gi.test(r.value)?n=!0:s("Поле должно содержать только русские буквы",r,c)}i&&l&&n&&(e.target.appendChild(o),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(e))})}(new FormData(e.target)).then((function(e){if(200!==e.status)throw new Error("status network not 200");t.closest(".popup-consultation")&&(t.closest(".popup-consultation").style.visibility="hidden");var o=document.querySelectorAll("input");document.querySelector(".popup-thank").style.visibility="visible",o.forEach((function(e){e.value=""}))})).catch((function(e){console.error(e),o.textContent="Что-то пошло не так..."})))}))};e.forEach((function(e){e.addEventListener("submit",r)})),t.forEach((function(e){e.addEventListener("submit",r)}))};const s=function(){var e=document.querySelectorAll(".formula-item"),t=document.querySelectorAll(".problems-item"),o=function(e,t){if(!(document.documentElement.clientWidth<=1024)){var o=e.target.closest(t+"-item"),r=o.querySelector(t+"-item-popup");if(o.classList.contains("active-item"))o.classList.remove("active-item");else{var i=r.getBoundingClientRect().top;o.classList.add("active-item"),i<0&&o.classList.add("active-item__reverse")}}};e.forEach((function(e){e.addEventListener("mouseover",(function(e){o(e,".formula")}))})),e.forEach((function(e){e.addEventListener("mouseout",(function(e){o(e,".formula")}))})),t.forEach((function(e){e.addEventListener("mouseover",(function(e){o(e,".problems")}))})),t.forEach((function(e){e.addEventListener("mouseout",(function(e){o(e,".problems")}))}))};const c=function(){var e,t,o=document.documentElement.clientWidth,i=document.querySelector(".repair-types-tab"),n=i.querySelector(".nav-list-repair"),l=i.querySelectorAll("button"),s=l.length,c=l[0].getBoundingClientRect().left,a=i.querySelector(".repair-types-nav").getBoundingClientRect().right,p=i.querySelector(".nav-arrow_right"),u=i.querySelector(".nav-arrow_left"),d=0,f=0,m=0;u.style.visibility="hidden";var y=function(){t=document.querySelector(".types-repair".concat(d+1))},v=function(){y(),e=t.cloneNode(!0),t.classList.remove("hide"),t.classList.add("show");var o=document.querySelector(".repair-types-slider-wrap");r(o,"types-repair".concat(d+1),"repair-types-slider__slide",".repair-types")};v();i.addEventListener("click",(function(r){var i=r.target;if("button"===i.type){if(o<=1024){var _=i.getBoundingClientRect().right,h=i.getBoundingClientRect().left;_>a&&(m+=-(_-a),n.style.marginLeft=m+"px"),h<c&&(m+=c-h,n.style.marginLeft=m+"px")}y(),t.replaceWith(e),t.classList.remove("show"),t.classList.add("hide"),l.forEach((function(e,t){e===i&&(d=t),e.classList.remove("active"),e.classList.remove("fade-tab")})),i.classList.add("active"),i.classList.add("fade-tab"),v()}if(i.closest(".nav-arrow_left")){if(p.style.visibility="visible",f>0){var b=l[f-1].getBoundingClientRect().left-l[f].getBoundingClientRect().left;l[0].getBoundingClientRect().right+b<c&&(m+=-b,n.style.marginLeft=m+"px",f--)}0===f&&(m=0,n.style.marginLeft="0px",u.style.visibility="hidden")}if(i.closest(".nav-arrow_right")&&(u.style.visibility="visible",f<s-1)){var g=l[f+1].getBoundingClientRect().left,w=l[s-1].getBoundingClientRect().right,S=l[s-1].getBoundingClientRect().right,q=g-c;w-q>a?(m+=-q,n.style.marginLeft=m+"px",f++):w>a&&(m+=-(S-a),n.style.marginLeft=m+"px",p.style.visibility="hidden")}}))};const a=function(){var e=document.documentElement.clientWidth;if(e<=1024){var t=document.querySelector(".formula-slider-wrap"),o=document.querySelector(".problems-slider-wrap");r(t,"formula-item__wrapper","formula-slider__slide",".formula"),r(o,"problems-item__wrapper","problems-slider__slide",".problems")}var i=document.querySelector(".reviews-slider-wrap");r(i,"reviews-item__wrapper","reviews-slider__slide",".reviews");var n=document.querySelector(".partners-slider-wrap");r(n,"partners-item__wrapper","partners-slider__slide",".partners");var l=document.querySelector(".portfolio-slider-wrap");if(r(l,"portfolio-item__wrapper","portfolio-slider__slide",".portfolioDesktop"),e<=575){var s=document.querySelector(".portfolio-slider-wrap");r(s,"portfolio-mobile-item__wrapper","portfolio-slider__slide-frame",".portfolio")}if(e<=1090){var c=document.querySelector(".transparency-slider-wrap");r(c,"transparency-item__wrapper","transparency-slider__slide",".transparency")}};const p=function(){var e=document.querySelector(".accordion");e.addEventListener("click",(function(t){var o=t.target;if(o.closest(".title_block")){var r=e.querySelectorAll(".title_block"),i=o.closest(".title_block");if(i.classList.contains("msg-active"))return void i.classList.remove("msg-active");r.forEach((function(e){e.classList.remove("msg-active")})),i.classList.add("msg-active")}}))};window.onload=function(){document.querySelector(".preload").classList.remove("preload")},e(),t(),o(),i(),a(),s(),n(),l(),p(),c()}();