!function(){"use strict";const e=function(){var e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord"),r=document.querySelector(".header-contacts__phone-number-accord .header-contacts__phone-number");e.addEventListener("click",(function(){"0"===r.style.opacity?(t.style.top="23px",r.style.opacity="1"):(t.style.top="0",r.style.opacity="0")}))};const t=function(){var e=document.querySelector("body"),t=document.querySelector(".popup-menu"),r=document.querySelector(".popup-dialog-menu");e.addEventListener("click",(function(e){var o=e.target;o.classList.contains("menu__icon")&&(t.style.visibility="visible",r.style.transform="translate3d(0, 0, 0)",document.documentElement.clientWidth>=575?(r.classList.remove("hideMenu"),r.classList.add("showMenu")):r.classList.add("showMenu-mobile")),(o.classList.contains("close-menu")||o.matches(".popup-menu a")||!o.closest(".popup-dialog-menu")&&r.classList.contains("showMenu")&&!o.classList.contains("menu__icon")||o.closest(".link-list-menu"))&&(t.style.visibility="hidden",document.documentElement.clientWidth>=575?(r.style.transform="translate3d(645px, 0, 0)",r.classList.remove("showMenu"),r.classList.add("hideMenu")):(r.style.transform="translate3d(0, -100vh, 0)",r.classList.remove("showMenu-mobile")))}))};const r=function(){var e=document.querySelectorAll(".popup-menu-nav__item .menu-link"),t=document.querySelector(".button-footer"),r=function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href").slice(1);t&&document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};e.forEach((function(e){e.addEventListener("click",r)})),t.addEventListener("click",r)};const o=function(e,t,r,o,n){for(var c,s,i,l,a,u=e.offsetWidth,d=document.querySelector("."+t),p=document.querySelectorAll("."+r),m=p.length,f=window.getComputedStyle(p[0]),y=p[0].offsetWidth+parseFloat(f.marginLeft)+parseFloat(f.marginRight),v=Math.floor(u/y),_=[],b=[],h=0;h<v;h++){var g=p[h].cloneNode(!0);_.push(g)}for(var E=p.length-1;E>=p.length-v;E--){var S=p[E].cloneNode(!0);b.push(S)}_.forEach((function(e,t){0===t&&(e.id="first-clone",c=e),d.append(e)})),b.forEach((function(e,t,r){t===r.length-1&&(e.id="last-clone",s=e),d.prepend(e)})),".popup-transparency"===o?l=-y*(a=n+1):(l=-y*v,a=v),d.style.transform="translateX(".concat(l,"px)");var q=function(e){var t=a;if(1!==v&&(t+=1),p[t].querySelector(o+"-item-popup").style.visibility="visible",e){var r=p[t].querySelector(o+"-item__icon"),n=p[t].querySelector(o+"-item__icon-inner");if(".problems"===o)n.querySelector("svg").style.transition="unset";r.style.transition="unset",n.style.transition="unset"}p[t].classList.add("active-item")},L=function(){p=document.querySelectorAll("."+r)},w=function(e){".formula"!==o&&".problems"!==o||q(e)},k=function(e){w(e),d.style.transform="translateX(".concat(-y*a,"px)"),d.style.transition=".7s"},x=function(){var e=document.querySelector(o+"-slider-wrap .slider-counter-content__current"),t=1;t=a>m?a-m:0===a?m:a,e.textContent=t},A=function(){L(),a>=p.length-1||(a++,k(),".popup-transparency"===o&&x())},M=function(){i=setInterval(A,1500)};(".formula"!==o&&".problems"!==o||(L(),q()),".partners"===o&&M(),".popup-transparency"===o)&&(document.querySelector(o+"-slider-wrap .slider-counter-content__total").textContent=m,x());e.addEventListener("transitionend",(function(e){if(e.target.classList.contains(t)){if(L(),p[a].id===c.id){d.style.transition="none",a=v,d.style.transform="translateX(".concat(-y*a,"px)");w(1)}if(p[a].id===s.id){d.style.transition="none",a=p.length-2*v,d.style.transform="translateX(".concat(-y*a,"px)");w(1)}}})),e.addEventListener("click",(function(e){var t=e.target;(t.closest(".slider-arrow_right")||t.closest(".slider-arrow_left")||t.closest(".popup-arrow_transparency_left")||t.closest(".popup-arrow_transparency_right"))&&(L(),".formula"!==o&&".problems"!==o||p.forEach((function(e){e.querySelector(o+"-item-popup").style.visibility="hidden",e.classList.remove("active-item")})),(t.closest(".slider-arrow_right")||t.closest(".popup-arrow_transparency_right"))&&A(),(t.closest(".slider-arrow_left")||t.closest(".popup-arrow_transparency_left"))&&(L(),a<=0||(a--,k(),".popup-transparency"===o&&x())))})),".partners"===o&&(e.addEventListener("mouseover",(function(e){(e.target.closest("."+t)||e.target.closest(".slider-arrow"))&&clearInterval(i)})),e.addEventListener("mouseout",(function(e){(e.target.closest("."+t)||e.target.closest(".slider-arrow"))&&M()})))};const n=function(){var e,t=document.querySelectorAll(".link-list-menu .menu-link"),r=document.querySelectorAll(".popup .close"),n=document.querySelectorAll(".link-privacy"),c=document.querySelectorAll(".button_wide"),s=document.querySelectorAll(".transparency-item__img"),i=document.querySelector(".popup-repair-types"),l=document.querySelector(".popup-privacy"),a=document.querySelector(".popup-consultation"),u=document.querySelector(".popup-transparency"),d=function(t,r){var n=t.target;(n.matches(".link-list-menu .menu-link")&&(i.style.visibility="visible"),n.classList.contains("link-privacy")&&(l.style.visibility="visible"),n.classList.contains("button_wide"))&&(a.querySelectorAll(".err-message").forEach((function(e){e.remove()})),a.style.visibility="visible");if(n.closest(".transparency-item__img")){u.style.visibility="visible",e=document.querySelector(".popup-transparency-item__wrapper").cloneNode(!0);var c=document.querySelector(".popup-transparency-slider-wrap");o(c,"popup-transparency-item__wrapper","popup-transparency-slider__slide",".popup-transparency",r)}n.classList.contains("close")&&(n.closest(".popup").style.visibility="hidden",n.closest(".popup-transparency")&&document.querySelector(".popup-transparency-item__wrapper").replaceWith(e))};t.forEach((function(e){e.addEventListener("click",d)})),r.forEach((function(e){e.addEventListener("click",d)})),n.forEach((function(e){e.addEventListener("click",d)})),c.forEach((function(e){e.addEventListener("click",d)})),s.forEach((function(e,t){e.addEventListener("click",(function(e){d(e,t)}))}))};const c=function(){var e=document.querySelectorAll(".feedback-block__form-input_phone"),t=document.querySelectorAll(".feedback__input-input"),r=function(e){var t=e.target,r=t.value;r=(r=(r=(r=(r=(r=r.replace(/\D|^[^78]/gi,"")).replace(/^[78]/gi,"+7(")).replace(/^\+7\(\d{3}/gi,(function(e){return e+")"}))).replace(/^\+7\(\d{3}\)\d{3}/gi,(function(e){return e+"-"}))).replace(/^\+7\(\d{3}\)\d{3}-\d{2}/gi,(function(e){return e+"-"}))).replace(/^\+7\(\d{3}\)\d{3}-\d{2}-\d{3,}/gi,(function(e){return e.slice(0,-1)})),t.value=r};e.forEach((function(e){e.addEventListener("input",r)})),t.forEach((function(e){e.addEventListener("input",r)}))};const s=function(){var e=document.querySelectorAll(".feedback__form"),t=document.querySelectorAll(".feedback-block__form"),r=document.createElement("div");r.style.cssText="font-size: 2rem; color: white; margin-top: 1em;";var o=function(e){e.preventDefault();var t=e.target,o=t.querySelectorAll("input"),n=!1,c=!1,s=!1;document.querySelectorAll(".err-message").forEach((function(e){e.remove()}));var i=function(e,t,r){var o=document.createElement("div");o.classList.add("err-message"),o.textContent=e,"phone"===r&&(o.style.cssText="margin-bottom: 10px;",t.closest(".feedback__form")&&(t.style.border="2px solid #f15858; z-index: 1; border-bottom: 5px solid #f15858;",o.style.color="#f15858",t.closest(".feedback__form").append(o)),t.closest(".feedback-block__form")&&(t.style.border="2px solid #bb2626; z-index: 1; border-bottom: 5px solid #bb2626;",o.style.color="#bb2626",t.closest(".feedback-block__form").append(o)),t.before(o)),"checkbox"===r&&(t.closest(".feedback__form")&&(o.style.color="#f15858",o.style.marginTop="-25px",t.closest(".feedback__form").append(o)),t.closest(".feedback-block__form")&&(o.style.color="#bb2626",t.closest(".feedback-block__form").append(o))),"name"===r&&(o.style.cssText="color: #bb2626; margin-bottom: 10px;",t.before(o))};t.classList.contains("feedback__form")&&(c=!0),o.forEach((function(o){var l=o.name,a=o.type;if("phone"===l){/^\++?7\(+?\d{3}\)+?\d{3}-+?\d{2}-+?\d{2}$/gi.test(o.value)?n=!0:i("Введите телефон в формате +7(123)123-45-67",o,l)}if("checkbox"===a&&(o.checked?s=!0:i("Ознакомьтесь, пожалуйста.",o,a)),"name"===l){o.value=o.value.trim();/^[а-я]+$/gi.test(o.value)?c=!0:i("Поле должно содержать только русские буквы",o,l)}n&&s&&c&&(e.target.appendChild(r),function(e){return fetch("../../server.php",{method:"POST",body:e})}(new FormData(e.target)).then((function(e){if(200!==e.status)throw new Error("status network not 200");t.closest(".popup-consultation")&&(t.closest(".popup-consultation").style.visibility="hidden");var r=document.querySelectorAll("input");document.querySelector(".popup-thank").style.visibility="visible",r.forEach((function(e){e.value=""}))})).catch((function(e){console.error(e),r.textContent="Что-то пошло не так..."})))}))};e.forEach((function(e){e.addEventListener("submit",o)})),t.forEach((function(e){e.addEventListener("submit",o)}))};const i=function(){var e=document.querySelectorAll(".formula-item"),t=document.querySelectorAll(".problems-item"),r=function(e,t){if(!(document.documentElement.clientWidth<=1024)){var r=e.target.closest(t+"-item"),o=r.querySelector(t+"-item-popup");if(r.classList.contains("active-item"))r.classList.remove("active-item");else{var n=o.getBoundingClientRect().top;r.classList.add("active-item"),n<0&&r.classList.add("active-item__reverse")}}};e.forEach((function(e){e.addEventListener("mouseover",(function(e){r(e,".formula")}))})),e.forEach((function(e){e.addEventListener("mouseout",(function(e){r(e,".formula")}))})),t.forEach((function(e){e.addEventListener("mouseover",(function(e){r(e,".problems")}))})),t.forEach((function(e){e.addEventListener("mouseout",(function(e){r(e,".problems")}))}))};const l=function(){};const a=function(){var e=document.documentElement.clientWidth;if(e<=1024){var t=document.querySelector(".formula-slider-wrap"),r=document.querySelector(".problems-slider-wrap");o(t,"formula-item__wrapper","formula-slider__slide",".formula"),o(r,"problems-item__wrapper","problems-slider__slide",".problems")}var n=document.querySelector(".reviews-slider-wrap");o(n,"reviews-item__wrapper","reviews-slider__slide",".reviews");var c=document.querySelector(".partners-slider-wrap");if(o(c,"partners-item__wrapper","partners-slider__slide",".partners"),e<=1090){var s=document.querySelector(".transparency-slider-wrap");o(s,"transparency-item__wrapper","transparency-slider__slide",".transparency")}};const u=function(){var e=document.querySelector(".accordion");e.addEventListener("click",(function(t){var r=t.target;if(r.closest(".title_block")){var o=e.querySelectorAll(".title_block"),n=r.closest(".title_block");if(n.classList.contains("msg-active"))return void n.classList.remove("msg-active");o.forEach((function(e){e.classList.remove("msg-active")})),n.classList.add("msg-active")}}))};window.onload=function(){document.querySelector(".preload").classList.remove("preload")},e(),t(),r(),n(),a(),i(),c(),s(),u(),l()}();