!function(){"use strict";const e=function(){var e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord"),r=document.querySelector(".header-contacts__phone-number-accord .header-contacts__phone-number");e.addEventListener("click",(function(){"0"===r.style.opacity?(t.style.top="23px",r.style.opacity="1"):(t.style.top="0",r.style.opacity="0")}))};const t=function(){var e=document.querySelector("body"),t=document.querySelector(".popup-menu"),r=document.querySelector(".popup-dialog-menu");e.addEventListener("click",(function(e){var n=e.target;n.classList.contains("menu__icon")&&(t.style.visibility="visible",r.style.transform="translate3d(0, 0, 0)",document.documentElement.clientWidth>=575?(r.classList.remove("hideMenu"),r.classList.add("showMenu")):r.classList.add("showMenu-mobile")),(n.classList.contains("close-menu")||n.matches(".popup-menu a")||!n.closest(".popup-dialog-menu")&&r.classList.contains("showMenu")&&!n.classList.contains("menu__icon")||n.closest(".link-list-menu"))&&(t.style.visibility="hidden",document.documentElement.clientWidth>=575?(r.style.transform="translate3d(645px, 0, 0)",r.classList.remove("showMenu"),r.classList.add("hideMenu")):(r.style.transform="translate3d(0, -100vh, 0)",r.classList.remove("showMenu-mobile")))}))};const r=function(){var e=document.querySelectorAll(".popup-menu-nav__item .menu-link"),t=document.querySelector(".button-footer"),r=function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href").slice(1);t&&document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};e.forEach((function(e){e.addEventListener("click",r)})),t.addEventListener("click",r)};const n=function(e,t,r,n,o){for(var i,s,c,l,a,u=e.offsetWidth,d=document.querySelector("."+t),p=d.querySelectorAll("."+r),m=p.length,f=window.getComputedStyle(p[0]),y=p[0].offsetWidth+parseFloat(f.marginLeft)+parseFloat(f.marginRight),v=Math.floor(u/y),_=[],h=[],b=0;b<v;b++){var g=p[b].cloneNode(!0);_.push(g)}for(var L=p.length-1;L>=p.length-v;L--){var S=p[L].cloneNode(!0);h.push(S)}_.forEach((function(e,t){0===t&&(e.id="first-clone",i=e),d.append(e)})),h.forEach((function(e,t,r){t===r.length-1&&(e.id="last-clone",s=e),d.prepend(e)})),".popup-transparency"===n?l=-y*(a=o+1):(l=-y*v,a=v),d.style.transform="translateX(".concat(l,"px)");var w=function(e){var t=a;if(1!==v&&(t+=1),p[t].querySelector(n+"-item-popup").style.visibility="visible",e){var r=p[t].querySelector(n+"-item__icon"),o=p[t].querySelector(n+"-item__icon-inner");if(".problems"===n)o.querySelector("svg").style.transition="unset";r.style.transition="unset",o.style.transition="unset"}p[t].classList.add("active-item")},q=function(){p=d.querySelectorAll("."+r)},E=function(e){".formula"!==n&&".problems"!==n||w(e)},k=function(e){E(e),d.style.transform="translateX(".concat(-y*a,"px)"),d.style.transition=".7s"},x=function(){var e=document.querySelector(n+"-slider-wrap .slider-counter-content__current"),t=1;t=a>m?a-m:0===a?m:a,e.textContent=t},A=function(){q(),a>=p.length-1||(a++,k(),".popup-transparency"!==n&&".repair-types"!==n||x())},C=function(){c=setInterval(A,1500)};(".formula"!==n&&".problems"!==n||(q(),w()),".partners"===n&&C(),".popup-transparency"===n||".repair-types"===n)&&(document.querySelector(n+"-slider-wrap .slider-counter-content__total").textContent=m,x());e.addEventListener("transitionend",(function(e){if(e.target.classList.contains(t)){if(q(),p[a].id===i.id){d.style.transition="none",a=v,d.style.transform="translateX(".concat(-y*a,"px)");E(1)}if(p[a].id===s.id){d.style.transition="none",a=p.length-2*v,d.style.transform="translateX(".concat(-y*a,"px)");E(1)}}})),e.addEventListener("click",(function(e){var t=e.target;(t.closest(".slider-arrow_right")||t.closest(".slider-arrow_left")||t.closest(".popup-arrow_transparency_left")||t.closest(".popup-arrow_transparency_right")||t.closest(".nav-arrow_right")||t.closest(".nav-arrow_left"))&&(q(),".formula"!==n&&".problems"!==n||p.forEach((function(e){e.querySelector(n+"-item-popup").style.visibility="hidden",e.classList.remove("active-item")})),(t.closest(".slider-arrow_right")||t.closest(".popup-arrow_transparency_right")||t.closest(".nav-arrow_right"))&&A(),(t.closest(".slider-arrow_left")||t.closest(".popup-arrow_transparency_left")||t.closest(".nav-arrow_left"))&&(q(),a<=0||(a--,k(),".popup-transparency"!==n&&".repair-types"!==n||x())))})),".partners"===n&&(e.addEventListener("mouseover",(function(e){(e.target.closest("."+t)||e.target.closest(".slider-arrow"))&&clearInterval(c)})),e.addEventListener("mouseout",(function(e){(e.target.closest("."+t)||e.target.closest(".slider-arrow"))&&C()})))};const o=function(){var e,t=document.querySelectorAll(".link-list"),r=document.querySelectorAll(".popup .close"),o=document.querySelectorAll(".link-privacy"),i=document.querySelectorAll(".button_wide"),s=document.querySelectorAll(".transparency-item__img"),c=document.querySelector(".popup-repair-types"),l=document.querySelector(".popup-privacy"),a=document.querySelector(".popup-consultation"),u=document.querySelector(".popup-transparency"),d=function(t,r){var o=t.target;(o.closest(".link-list")&&(c.style.visibility="visible"),o.classList.contains("link-privacy")&&(l.style.visibility="visible"),o.classList.contains("button_wide"))&&(a.querySelectorAll(".err-message").forEach((function(e){e.remove()})),a.style.visibility="visible");if(o.closest(".transparency-item__img")){u.style.visibility="visible",e=document.querySelector(".popup-transparency-item__wrapper").cloneNode(!0);var i=document.querySelector(".popup-transparency-slider-wrap");n(i,"popup-transparency-item__wrapper","popup-transparency-slider__slide",".popup-transparency",r)}o.classList.contains("close")&&(o.closest(".popup").style.visibility="hidden",o.closest(".popup-transparency")&&document.querySelector(".popup-transparency-item__wrapper").replaceWith(e))};t.forEach((function(e){e.addEventListener("click",d)})),r.forEach((function(e){e.addEventListener("click",d)})),o.forEach((function(e){e.addEventListener("click",d)})),i.forEach((function(e){e.addEventListener("click",d)})),s.forEach((function(e,t){e.addEventListener("click",(function(e){d(e,t)}))}))};const i=function(){var e=document.querySelectorAll(".feedback-block__form-input_phone"),t=document.querySelectorAll(".feedback__input-input"),r=function(e){var t=e.target,r=t.value;r=(r=(r=(r=(r=(r=r.replace(/\D|^[^78]/gi,"")).replace(/^[78]/gi,"+7(")).replace(/^\+7\(\d{3}/gi,(function(e){return e+")"}))).replace(/^\+7\(\d{3}\)\d{3}/gi,(function(e){return e+"-"}))).replace(/^\+7\(\d{3}\)\d{3}-\d{2}/gi,(function(e){return e+"-"}))).replace(/^\+7\(\d{3}\)\d{3}-\d{2}-\d{3,}/gi,(function(e){return e.slice(0,-1)})),t.value=r};e.forEach((function(e){e.addEventListener("input",r)})),t.forEach((function(e){e.addEventListener("input",r)}))};const s=function(){var e=document.querySelectorAll(".feedback__form"),t=document.querySelectorAll(".feedback-block__form"),r=document.createElement("div");r.style.cssText="font-size: 2rem; color: white; margin-top: 1em;";var n=function(e){e.preventDefault();var t=e.target,n=t.querySelectorAll("input"),o=!1,i=!1,s=!1;document.querySelectorAll(".err-message").forEach((function(e){e.remove()}));var c=function(e,t,r){var n=document.createElement("div");n.classList.add("err-message"),n.textContent=e,"phone"===r&&(n.style.cssText="margin-bottom: 10px;",t.closest(".feedback__form")&&(t.style.border="2px solid #f15858; z-index: 1; border-bottom: 5px solid #f15858;",n.style.color="#f15858",t.closest(".feedback__form").append(n)),t.closest(".feedback-block__form")&&(t.style.border="2px solid #bb2626; z-index: 1; border-bottom: 5px solid #bb2626;",n.style.color="#bb2626",t.closest(".feedback-block__form").append(n)),t.before(n)),"checkbox"===r&&(t.closest(".feedback__form")&&(n.style.color="#f15858",n.style.marginTop="-25px",t.closest(".feedback__form").append(n)),t.closest(".feedback-block__form")&&(n.style.color="#bb2626",t.closest(".feedback-block__form").append(n))),"name"===r&&(n.style.cssText="color: #bb2626; margin-bottom: 10px;",t.before(n))};t.classList.contains("feedback__form")&&(i=!0),n.forEach((function(n){var l=n.name,a=n.type;if("phone"===l){/^\++?7\(+?\d{3}\)+?\d{3}-+?\d{2}-+?\d{2}$/gi.test(n.value)?o=!0:c("Введите телефон в формате +7(123)123-45-67",n,l)}if("checkbox"===a&&(n.checked?s=!0:c("Ознакомьтесь, пожалуйста.",n,a)),"name"===l){n.value=n.value.trim();/^[а-я]+$/gi.test(n.value)?i=!0:c("Поле должно содержать только русские буквы",n,l)}o&&s&&i&&(e.target.appendChild(r),function(e){return fetch("../../server.php",{method:"POST",body:e})}(new FormData(e.target)).then((function(e){if(200!==e.status)throw new Error("status network not 200");t.closest(".popup-consultation")&&(t.closest(".popup-consultation").style.visibility="hidden");var r=document.querySelectorAll("input");document.querySelector(".popup-thank").style.visibility="visible",r.forEach((function(e){e.value=""}))})).catch((function(e){console.error(e),r.textContent="Что-то пошло не так..."})))}))};e.forEach((function(e){e.addEventListener("submit",n)})),t.forEach((function(e){e.addEventListener("submit",n)}))};const c=function(){var e=document.querySelectorAll(".formula-item"),t=document.querySelectorAll(".problems-item"),r=function(e,t){if(!(document.documentElement.clientWidth<=1024)){var r=e.target.closest(t+"-item"),n=r.querySelector(t+"-item-popup");if(r.classList.contains("active-item"))r.classList.remove("active-item");else{var o=n.getBoundingClientRect().top;r.classList.add("active-item"),o<0&&r.classList.add("active-item__reverse")}}};e.forEach((function(e){e.addEventListener("mouseover",(function(e){r(e,".formula")}))})),e.forEach((function(e){e.addEventListener("mouseout",(function(e){r(e,".formula")}))})),t.forEach((function(e){e.addEventListener("mouseover",(function(e){r(e,".problems")}))})),t.forEach((function(e){e.addEventListener("mouseout",(function(e){r(e,".problems")}))}))};const l=function(){var e,t,r=document.documentElement.clientWidth,o=document.querySelector(".repair-types-tab"),i=o.querySelector(".nav-list-repair"),s=o.querySelectorAll("button"),c=s.length,l=s[0].getBoundingClientRect().left,a=o.querySelector(".repair-types-nav").getBoundingClientRect().right,u=o.querySelector(".nav-arrow_right"),d=o.querySelector(".nav-arrow_left"),p=0,m=0,f=0;d.style.visibility="hidden";var y=function(){t=document.querySelector(".types-repair".concat(p+1))},v=function(){y(),e=t.cloneNode(!0),t.classList.remove("hide"),t.classList.add("show");var r=document.querySelector(".repair-types-slider-wrap");n(r,"types-repair".concat(p+1),"repair-types-slider__slide",".repair-types")};v();o.addEventListener("click",(function(n){var o=n.target;if("button"===o.type){if(r<=1024){var _=o.getBoundingClientRect().right,h=o.getBoundingClientRect().left;_>a&&(f+=-(_-a),i.style.marginLeft=f+"px"),h<l&&(f+=l-h,i.style.marginLeft=f+"px")}y(),t.replaceWith(e),t.classList.remove("show"),t.classList.add("hide"),s.forEach((function(e,t){e===o&&(p=t),e.classList.remove("active"),e.classList.remove("fade-tab")})),o.classList.add("active"),o.classList.add("fade-tab"),v()}if(o.closest(".nav-arrow_left")){if(u.style.visibility="visible",m>0){var b=s[m-1].getBoundingClientRect().left-s[m].getBoundingClientRect().left;s[0].getBoundingClientRect().right+b<l&&(f+=-b,i.style.marginLeft=f+"px",m--)}0===m&&(f=0,i.style.marginLeft="0px",d.style.visibility="hidden")}if(o.closest(".nav-arrow_right")&&(d.style.visibility="visible",m<c-1)){var g=s[m+1].getBoundingClientRect().left,L=s[c-1].getBoundingClientRect().right,S=s[c-1].getBoundingClientRect().right,w=g-l;L-w>a?(f+=-w,i.style.marginLeft=f+"px",m++):L>a&&(f+=-(S-a),i.style.marginLeft=f+"px",u.style.visibility="hidden")}}))};const a=function(){var e=document.documentElement.clientWidth;if(e<=1024){var t=document.querySelector(".formula-slider-wrap"),r=document.querySelector(".problems-slider-wrap");n(t,"formula-item__wrapper","formula-slider__slide",".formula"),n(r,"problems-item__wrapper","problems-slider__slide",".problems")}var o=document.querySelector(".reviews-slider-wrap");n(o,"reviews-item__wrapper","reviews-slider__slide",".reviews");var i=document.querySelector(".partners-slider-wrap");if(n(i,"partners-item__wrapper","partners-slider__slide",".partners"),e<=1090){var s=document.querySelector(".transparency-slider-wrap");n(s,"transparency-item__wrapper","transparency-slider__slide",".transparency")}};const u=function(){var e=document.querySelector(".accordion");e.addEventListener("click",(function(t){var r=t.target;if(r.closest(".title_block")){var n=e.querySelectorAll(".title_block"),o=r.closest(".title_block");if(o.classList.contains("msg-active"))return void o.classList.remove("msg-active");n.forEach((function(e){e.classList.remove("msg-active")})),o.classList.add("msg-active")}}))};window.onload=function(){document.querySelector(".preload").classList.remove("preload")},e(),t(),r(),o(),a(),c(),i(),s(),u(),l()}();