!function(){"use strict";const e=function(){var e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord"),o=document.querySelector(".header-contacts__phone-number-accord .header-contacts__phone-number");e.addEventListener("click",(function(){"0"===o.style.opacity?(t.style.top="23px",o.style.opacity="1"):(t.style.top="0",o.style.opacity="0")}))};const t=function(){var e=document.querySelector("body"),t=document.querySelector(".popup-menu"),o=document.querySelector(".popup-dialog-menu");e.addEventListener("click",(function(e){var n=e.target;n.classList.contains("menu__icon")&&(t.style.visibility="visible",o.style.transform="translate3d(0, 0, 0)",document.documentElement.clientWidth>=575?(o.classList.remove("hideMenu"),o.classList.add("showMenu")):o.classList.add("showMenu-mobile")),(n.classList.contains("close-menu")||n.matches(".popup-menu a")||!n.closest(".popup-dialog-menu")&&o.classList.contains("showMenu")&&!n.classList.contains("menu__icon")||n.closest(".link-list-menu"))&&(t.style.visibility="hidden",document.documentElement.clientWidth>=575?(o.style.transform="translate3d(645px, 0, 0)",o.classList.remove("showMenu"),o.classList.add("hideMenu")):(o.style.transform="translate3d(0, -100vh, 0)",o.classList.remove("showMenu-mobile")))}))};const o=function(){var e=document.querySelectorAll(".popup-menu-nav__item .menu-link"),t=document.querySelector(".button-footer"),o=function(e){e.preventDefault();var t=e.target.closest("a").getAttribute("href").slice(1);t&&document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})};e.forEach((function(e){e.addEventListener("click",o)})),t.addEventListener("click",o)};const n=function(){var e=document.querySelectorAll(".link-list-menu .menu-link"),t=document.querySelectorAll(".popup .close"),o=document.querySelectorAll(".link-privacy"),n=document.querySelectorAll(".button_wide"),r=document.querySelector(".popup-repair-types"),c=document.querySelector(".popup-privacy"),i=document.querySelector(".popup-consultation"),s=function(e){var t=e.target;(t.matches(".link-list-menu .menu-link")&&(r.style.visibility="visible"),t.classList.contains("link-privacy")&&(c.style.visibility="visible"),t.classList.contains("button_wide"))&&(i.querySelectorAll(".err-message").forEach((function(e){e.remove()})),i.style.visibility="visible");t.classList.contains("close")&&(t.closest(".popup").style.visibility="hidden")};e.forEach((function(e){e.addEventListener("click",s)})),t.forEach((function(e){e.addEventListener("click",s)})),o.forEach((function(e){e.addEventListener("click",s)})),n.forEach((function(e){e.addEventListener("click",s)}))};const r=function(){var e=document.querySelectorAll(".feedback-block__form-input_phone"),t=document.querySelectorAll(".feedback__input-input"),o=function(e){var t=e.target,o=t.value;o=(o=(o=(o=(o=(o=o.replace(/\D|^[^78]/gi,"")).replace(/^[78]/gi,"+7(")).replace(/^\+7\(\d{3}/gi,(function(e){return e+")"}))).replace(/^\+7\(\d{3}\)\d{3}/gi,(function(e){return e+"-"}))).replace(/^\+7\(\d{3}\)\d{3}-\d{2}/gi,(function(e){return e+"-"}))).replace(/^\+7\(\d{3}\)\d{3}-\d{2}-\d{3,}/gi,(function(e){return e.slice(0,-1)})),t.value=o};e.forEach((function(e){e.addEventListener("input",o)})),t.forEach((function(e){e.addEventListener("input",o)}))};const c=function(){var e=document.querySelectorAll(".feedback__form"),t=document.querySelectorAll(".feedback-block__form"),o=document.createElement("div");o.style.cssText="font-size: 2rem; color: white; margin-top: 1em;";var n=function(e){e.preventDefault();var t=e.target,n=t.querySelectorAll("input"),r=!1,c=!1,i=!1;document.querySelectorAll(".err-message").forEach((function(e){e.remove()}));var s=function(e,t,o){var n=document.createElement("div");n.classList.add("err-message"),n.textContent=e,"phone"===o&&(n.style.cssText="margin-bottom: 10px;",t.closest(".feedback__form")&&(t.style.border="2px solid #f15858; z-index: 1; border-bottom: 5px solid #f15858;",n.style.color="#f15858",t.closest(".feedback__form").append(n)),t.closest(".feedback-block__form")&&(t.style.border="2px solid #bb2626; z-index: 1; border-bottom: 5px solid #bb2626;",n.style.color="#bb2626",t.closest(".feedback-block__form").append(n)),t.before(n)),"checkbox"===o&&(t.closest(".feedback__form")&&(n.style.color="#f15858",n.style.marginTop="-25px",t.closest(".feedback__form").append(n)),t.closest(".feedback-block__form")&&(n.style.color="#bb2626",t.closest(".feedback-block__form").append(n))),"name"===o&&(n.style.cssText="color: #bb2626; margin-bottom: 10px;",t.before(n))};t.classList.contains("feedback__form")&&(c=!0),n.forEach((function(n){var l=n.name,a=n.type;if("phone"===l){/^\++?7\(+?\d{3}\)+?\d{3}-+?\d{2}-+?\d{2}$/gi.test(n.value)?r=!0:s("Введите телефон в формате +7(123)123-45-67",n,l)}if("checkbox"===a&&(n.checked?i=!0:s("Ознакомьтесь, пожалуйста.",n,a)),"name"===l){n.value=n.value.trim();/^[а-я]+$/gi.test(n.value)?c=!0:s("Поле должно содержать только русские буквы",n,l)}r&&i&&c&&(e.target.appendChild(o),function(e){return fetch("../../server.php",{method:"POST",body:e})}(new FormData(e.target)).then((function(e){if(200!==e.status)throw new Error("status network not 200");t.closest(".popup-consultation")&&(t.closest(".popup-consultation").style.visibility="hidden");var o=document.querySelectorAll("input");document.querySelector(".popup-thank").style.visibility="visible",o.forEach((function(e){e.value=""}))})).catch((function(e){console.error(e),o.textContent="Что-то пошло не так..."})))}))};e.forEach((function(e){e.addEventListener("submit",n)})),t.forEach((function(e){e.addEventListener("submit",n)}))};const i=function(){var e=document.querySelectorAll(".formula-item"),t=document.querySelectorAll(".problems-item"),o=function(e,t){if(!(document.documentElement.clientWidth<=1024)){var o=e.target.closest(t+"-item"),n=o.querySelector(t+"-item-popup");if(o.classList.contains("active-item"))o.classList.remove("active-item");else{var r=n.getBoundingClientRect().top;o.classList.add("active-item"),r<0&&o.classList.add("active-item__reverse")}}};e.forEach((function(e){e.addEventListener("mouseover",(function(e){o(e,".formula")}))})),e.forEach((function(e){e.addEventListener("mouseout",(function(e){o(e,".formula")}))})),t.forEach((function(e){e.addEventListener("mouseover",(function(e){o(e,".problems")}))})),t.forEach((function(e){e.addEventListener("mouseout",(function(e){o(e,".problems")}))}))};const s=function(){};const l=function(){};const a=function(e,t,o,n){for(var r,c,i=e.offsetWidth,s=document.querySelector("."+t),l=document.querySelectorAll("."+o),a=window.getComputedStyle(l[0]),u=l[0].offsetWidth+parseInt(a.marginLeft)+parseInt(a.marginRight),d=Math.floor(i/u),m=[],f=[],p=0;p<d;p++){var v=l[p].cloneNode(!0);m.push(v)}for(var y=l.length-1;y>=l.length-d;y--){var b=l[y].cloneNode(!0);f.push(b)}m.forEach((function(e,t){0===t&&(e.id="first-clone",r=e),s.append(e)})),f.forEach((function(e,t,o){t===o.length-1&&(e.id="last-clone",c=e),s.prepend(e)}));var h=-u*d,_=d;s.style.transform="translateX(".concat(h,"px)");var E=function(e){var t=_;if(1!==d&&(t+=1),l[t].querySelector(n+"-item-popup").style.visibility="visible",e){var o=l[t].querySelector(n+"-item__icon"),r=l[t].querySelector(n+"-item__icon-inner");if(".problems"===n)r.querySelector("svg").style.transition="unset";o.style.transition="unset",r.style.transition="unset"}l[t].classList.add("active-item")},g=function(){l=document.querySelectorAll("."+o)},k=function(e){".formula"!==n&&".problems"!==n||E(e)},L=function(e){k(e),s.style.transform="translateX(".concat(-u*_,"px)"),s.style.transition=".7s"};".formula"!==n&&".problems"!==n||(g(),E());e.addEventListener("transitionend",(function(e){if(e.target.classList.contains(t)){if(g(),l[_].id===r.id){s.style.transition="none",_=d,s.style.transform="translateX(".concat(-u*_,"px)");k(1)}if(l[_].id===c.id){s.style.transition="none",_=l.length-2*d,s.style.transform="translateX(".concat(-u*_,"px)");k(1)}}})),e.addEventListener("click",(function(e){var t=e.target;if(t.closest(".slider-arrow_right")||t.closest(".slider-arrow_left")){if(g(),".formula"!==n&&".problems"!==n||l.forEach((function(e){e.querySelector(n+"-item-popup").style.visibility="hidden",e.classList.remove("active-item")})),t.closest(".slider-arrow_right")){if(_>=l.length-1)return;_++,L()}if(t.closest(".slider-arrow_left")){if(_<=0)return;_--,L()}}}))};const u=function(){if(document.documentElement.clientWidth<=1024){var e=document.querySelector(".formula-slider-wrap"),t=document.querySelector(".problems-slider-wrap");a(e,"formula-item__wrapper","formula-slider__slide",".formula"),a(t,"problems-item__wrapper","problems-slider__slide",".problems")}var o=document.querySelector(".reviews-slider-wrap");a(o,"reviews-item__wrapper","reviews-slider__slide",".reviews")};window.onload=function(){document.querySelector(".preload").classList.remove("preload")},e(),t(),o(),n(),r(),c(),i(),s(),l(),u()}();